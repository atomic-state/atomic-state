/**  @license Atomic State
 * Copyright (c) Dany Beltran
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
*/ (()=>{let{createContext:e,useCallback:t,useContext:n,useEffect:r,useMemo:i,useRef:a,useState:l}=React;class o{constructor(){this.suscribers={}}async addListener(e,t){e in this.suscribers||(this.suscribers[e]={});let n=Object.keys(this.suscribers[e]).length+1;"__proto__"!==e&&"prototype"!==e?this.suscribers[e][n]=t:console.warn('"prototype" and "__proto__" are not valid message names')}async removeListener(e,t){for(let n in this.suscribers[e])this.suscribers[e][n]===t&&delete this.suscribers[e][n]}emit(e,t){for(let n in this.suscribers[e])this.suscribers[e][n](t)}}function u(){let e=new o;return{observer:e,notify:function t(n,r,i){e.emit(n,{storeName:n,hookCall:r,payload:i})}}}let s={},f={},c={},d={},m={},v={},y={},$={},p={},h={},g="undefined"!=typeof localStorage?localStorage:{getItem(){},setItem(){},removeItem(){}},b=e({prefix:"store",persistenceProvider:g});function j({atm:e}){return H(e),null}function I({filt:e}){return B(e),null}function L(e){return void 0!==e}function _(e){return"function"==typeof e}function w(e){return e instanceof Promise}function E(e,t){return JSON.stringify(e)===JSON.stringify(t)}let N=({children:e,atoms:t,filters:r,prefix:a="store",persistenceProvider:l=g})=>{let o=n(b),u=L(a)?a:o.prefix;if(t)for(let s in t){let y=`${u}-${s}`;L(f[y])||(f[y]=t[s],m[y]=!0)}if(r)for(let p in r){let h=`${u}-${p}`;L($[h])||($[h]=r[p],v[h]=!0)}let _=Object.values(c),w=i(()=>Math.random(),[]).toString(),E=i(()=>_.map(e=>React.createElement(React.StrictMode,{key:(null==e?void 0:e.name)+a+w},React.createElement(j,{atm:e}))),[_]),N=Object.values(d),k=i(()=>N.map(e=>React.createElement(React.StrictMode,{key:(null==e?void 0:e.name)+a+w},React.createElement(I,{filt:e}))),[N]);return React.createElement(b.Provider,{value:{prefix:u,persistenceProvider:l}},React.createElement(React.Fragment,null,E,k),e)},k={},S={};function A(e){let t={};for(let n in f){let[r,i]=n.split("-");L(t[r])||(t[r]={filters:{},atoms:{}}),t[r].atoms[i]=f[n]}for(let a in $){let[l,o]=a.split("-");L(t[l])||(t[l]={filters:{},atoms:{}}),t[l].filters[o]=$[a]}return L(e)?t[e]||{}:t}function x(e,t="store"){let n=[t,e].join("-");return f[n]}function F(e,t="store"){let n=[t,e].join("-");return $[n]}function P(e){let{prefix:o,persistenceProvider:c}=n(b),{effects:d=[],persist:v,localStoragePersistence:y,sync:g=!0,onSync:j=()=>{},persistenceProvider:I=c}=e,N=o+"-"+e.name,[A,x]=l(!1),F=y||v,P=i(()=>`${Math.random()}`.split(".")[1],[]);N in p||(p[N]=[]);let V=L(e.default),C=L(f[N])?f[N]:e.default,M=function t(){let n=!L(f[N])&&_(e.default),r=n?e.default():w(e.default)?e.default:void 0,i=w(r),a=V?L(f[N])?C:i?e.default:L(r)?r:C:C;try{return F?"undefined"!=typeof localStorage&&(!L(f[N])||m[N])&&(m[N]=!1,f[N]=i?void 0:a):L(f[N])||(f[N]=a),a}catch(l){return a}}(),[D,K]=l(()=>{if(v)try{return(async()=>{let t=void 0===I?e.default:await I.getItem(N);return void 0===I?e.default:JSON.parse(t)||C})()}catch(t){return M}}),[W,q]=l((w(M)||_(M))&&!L(f[N])?void 0:(f[N]=M,M));h[N]||(h[N]=0),s[N]||(s[N]=u());let{observer:z,notify:B}=s[N],[G,H]=l(!1),J=a(!1),O=t(e=>{let t=!1,n,r;function i(){t=!0}n=_(e)?e(f[N]):e,r=(()=>{try{return!E(n,f[N])}catch(e){return!1}})();let a=(()=>{try{if(_(f[N]))return!0;if(E(n,C)&&!k[N])return k[N]=!0,!0;return!1}catch(e){return!0}})(),l=_(f[N])||r||a;try{for(let o of p[N])o()}catch(u){}finally{p[N]=[];try{for(let s of d){let c=s({previous:W,state:n,dispatch:O,cancel:i});w(c)?c.then(e=>{L(e)&&!e?t=!0:_(e)&&p[N].push(e)}):L(c)&&!c?t=!0:_(c)&&p[N].push(c)}}catch(m){H(!0)}finally{if(!t){L(n)&&(f[N]=n,F&&I.setItem(N,JSON.stringify(n)));try{l&&L(n)&&B(N,P,n)}finally{L(n)&&q(n)}}}}},[P,B,G,N,F,J,W,e.name,]);r(()=>{async function e(){if("undefined"!=typeof localStorage&&L(localStorage[N]))try{let e=JSON.parse(localStorage[N]);E(e,f[N])||(O(e),await j(e))}catch(t){}}if(F&&"undefined"!=typeof window&&I===localStorage){let t=L(window.addEventListener);if(t&&g)return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}}return()=>{}},[e.name,F,I]),r(()=>{async function e(){if(S[N]=!0,L(D)&&!J.current){let e=setTimeout(async()=>{if(F){let e=await D;E(e,f[N])||L(k[N])||O(e),x(!0)}},0),t=setTimeout(()=>{K(void 0),J.current=!0},0);return()=>{clearTimeout(e),clearTimeout(t)}}return()=>{}}S[N]||e()},[D,O,J,N]),r(()=>{async function t(){var t;if(!L(f[N])&&_(e.default)){if(0===h[N]){h[N]+=1;let n=L(e.default)?(async()=>_(e.default)?e.default():e.default)():void 0;L(n)&&n.then(e=>{f[N]=e,B(N,P,f[N]),O(e)})}else h[N]+=1,(W||f[N])&&(null===(t=s[N])||void 0===t||t.notify(N,P,L(W)?W:f[N]))}}t()},[W,C,O,e.name,P]),r(()=>()=>{h[N]=0},[e.name]),r(()=>{let e=async e=>{e.hookCall!==P&&L(e.payload)&&q(e.payload)};return z.addListener(N,e),()=>{z.removeListener(N,e)}},[G]),r(()=>{async function t(){if("undefined"!=typeof localStorage){let t=await I.getItem(N);(L(t)||null===t)&&(F?L(W)&&!E(W,e.default)&&I.setItem(N,JSON.stringify(W)):I.removeItem(N))}}t()},[e.name,F,W]);let Q=t(function(e){let t=[o,e["atom-name"]].join("-"),n=f[t];return n},[o]),R=t(function(e){let t=[o,e["filter-name"]].join("-"),n=$[t];return n},[o]),T=i(()=>e.actions||{},[e.actions]),U=i(()=>Object.fromEntries(Object.keys(T).map(e=>[e,t=>T[e]({args:t,state:W,dispatch:O,get:Q,read:R}),])),[W]);return[W,O,U]}let V={};function C(e){e.ignoreKeyWarning&&(V[e.name]=!0),y[e.name]=!0,c[null==e?void 0:e.name]||(c[null==e?void 0:e.name]=e);let t=()=>P(e);return t["atom-name"]=e.name,t["init-object"]=e,t}let M=C,D={},K={},W={},q={};function z(e){L(d[null==e?void 0:e.name])||(d[null==e?void 0:e.name]=e);let{name:a=""}=d[null==e?void 0:e.name],o={},c={},m={},v={},y={},p=()=>{let p=i(()=>Math.random(),[]),{prefix:h}=n(b);o[`${h}-`]||(o[`${h}-`]={});let g=h+"-"+a;W[g]||(W[g]=u());let j=W[g],I=t(function e(t,n){j.notify(g,t,n)},[h,p,g]);for(let N in o[`${h}-`])y[N]!==f[N]&&(K[g]=!1);for(let k in m)v[k]!==$[k]&&(K[g]=!1);let S=i(()=>({get(e){var t;if(q[g]=!0,_(e)){let n=[h,null===(t=null==e?void 0:e["init-object"])||void 0===t?void 0:t.name,].join("-");o[`${h}-`][n]=!0,y[n]=f[n]}else{let r=[h,e.name].join("-");o[`${h}-`][r]=!0,y[r]=f[r]}let i=[h,C.name].join("-"),a=[h,e["atom-name"]].join("-");return _(e)?L(f[a])?f[a]:e["init-object"].default:L(f[i])?f[i]:e.default},read(e){var t;q[g]=!0;let n=_(e)?[h,e["filter-name"]].join("-"):[h,e.name].join("-");return _(e),m[n]=!0,v[n]=$[n],_(e)?L($[n])?$[n]:null===(t=e["init-object"])||void 0===t?void 0:t.default:L($[n])?$[n]:e.default}}),[h]),A=$[g],x=function t(){try{let n;return K[g]?$[g]:(()=>{var t;K[g]=!0,$[g]=e.default;try{if(n=null===(t=d[a])||void 0===t?void 0:t.get(S),!L(n))return e.default;return(async()=>{n=await n,$[g]=n,L(n)&&I("",n)})(),n}catch(r){}finally{return L(n)&&I("",n),n}})()}catch(r){return e.default}}();K[g]=!0,w(x)&&($[g]=x,setTimeout(async()=>{$[g]=await x,I(p,await $[g])},0)),L(x)?w(x)?x.then(e=>{A=e,$[g]=e,j.notify(g,"",e)}):(A=x,$[g]=x):L(A)||(A=e.default);let[F,P]=l(()=>L(A)&&w(A)?w(x)?e.default:x:A);async function V(e){var t;let n=e.storeName in m;if(_(e.payload)||(n?!E($[e.storeName],v[e.storeName]):!E(e.payload,y[e.storeName]))){e.storeName in(n?m:o[`${h}-`])&&L(e.payload)&&(n?v[e.storeName]=e.payload:y[e.storeName]=e.payload);try{if(!c[g]){c[g]=!0;let r=e.storeName in o[`${h}-`]||e.storeName in m?null===(t=d[a])||void 0===t?void 0:t.get(S):$[g];$[g]=r,(async()=>{if(_(r))I(p,r),P(()=>r);else if(L(r)){if(w(r)){let e=await r;P(e),I(p,e)}else P(r),I(p,r)}c[g]=!1})()}}catch(i){}}}async function M(e){let{payload:t}=e;if(p!==e.hookCall){let n=await t;_(n)?P(()=>n):L(n)&&P(n)}}return r(()=>{var e;null===(e=s[g])||void 0===e||e.notify(g,"",F)},[F]),r(()=>{!K[g]&&L(F)&&I(p,F)},[F,p,g,K[g]]),r(()=>{w(x)&&x.then(e=>{L(e)&&($[g]=e,P(e))})},[x]),r(()=>{var e,t;for(let n in o[`${h}-`])null===(e=s[n])||void 0===e||e.observer.addListener(n,V);for(let r in m)null===(t=W[r])||void 0===t||t.observer.addListener(r,V);return()=>{var e,t;for(let n in o[`${h}-`])null===(e=s[n])||void 0===e||e.observer.removeListener(n,V);for(let r in m)null===(t=W[r])||void 0===t||t.observer.removeListener(r,V)}},[]),r(()=>{var e;return null===(e=j.observer)||void 0===e||e.addListener(g,M),()=>{var e;null===(e=null==j?void 0:j.observer)||void 0===e||e.removeListener(g,M)}},[g]),F};return p["filter-name"]=a,p["init-object"]=e,p}function B(e){let{prefix:t}=n(b);if(_(e)){let r=e["init-object"];r!==d[null==r?void 0:r.name]&&L(r)&&((d[null==r?void 0:r.name]||{}).get=null==r?void 0:r.get)}else d[e.name]!==e&&((d[null==e?void 0:e.name]||{}).get=null==e?void 0:e.get);return _(e)?e():(()=>{let n=[t,e.name].join("-");return L(D[n])?D[n]["init-object"]!==e&&(D[n]=z(e)):D[n]=z(d[e.name]),D[n]()})()}let G={};function H(e){return _(e)||(L(G[e.name])?G[e.name]["init-object"]!==e&&(G[e.name]=M(e)):G[e.name]=M(e)),_(e)?e():G[e.name]()}function J(e){return H(e)[0]}function O(e){return H(e)[1]}function Q(e){return H(e)[2]}let R=(()=>{let e=new o;return e})();function T(e){let[t,n]=l(e||{});async function i(){let e={};if("undefined"!=typeof localStorage){for(let t in localStorage)if(!t.match(/clear|getItem|key|length|removeItem|setItem/))try{L(localStorage[t])&&(e[t]=JSON.parse(localStorage[t]))}catch(r){e[t]=localStorage[t]}}n(e)}return r(()=>{i()},[]),r(()=>(R.addListener("store-changed",i),()=>{R.removeListener("store-changed",i)}),[]),t}let U={set(e,t){"undefined"!=typeof localStorage&&_(localStorage.setItem)&&(localStorage.setItem(e,JSON.stringify(t)),R.emit("store-changed",t))},async remove(e){"undefined"!=typeof localStorage&&_(localStorage.removeItem)&&(localStorage.removeItem(e),R.emit("store-changed",{}))},get(e,t=null){if("undefined"==typeof localStorage)return t;if(_(localStorage.getItem))try{return JSON.parse(localStorage.getItem(e))}catch(n){return t}else try{return JSON.parse(localStorage[e])}catch(r){return t}}};function X(e,t=null){let[n,i]=l(t),a=()=>{if("undefined"!=typeof localStorage&&!E(localStorage[e],t))try{i(JSON.parse(localStorage[e]))}catch(n){i(t)}};return r(()=>(a(),R.addListener("store-changed",a),()=>{R.removeListener("store-changed",a)}),[]),n}window.atom=C,window.useAtom=H,window.useValue=J,window.useDispatch=O,window.useActions=Q,window.AtomicState=N,window.takeSnapshot=A,window.getAtomValue=x,window.getFilterValue=F,window.filter=z,window.useFilter=B,window.storage=U,window.useStorage=T,window.useStorageItem=X})();