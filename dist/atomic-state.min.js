(()=>{class m{constructor(){this.suscribers={}}async addListener(a,b){a in this.suscribers||(this.suscribers[a]={});let c=Object.keys(this.suscribers[a]).length+1;"__proto__"!==a&&"prototype"!==a?this.suscribers[a][c]=b:console.warn('"prototype" and "__proto__" are not valid message names')}async removeListener(a,c){for(let b in this.suscribers[a])this.suscribers[a][b]===c&&delete this.suscribers[a][b]}async emit(a,b){for(let c in this.suscribers[a])this.suscribers[a][c](b)}}let{createContext:b,useCallback:n,useContext:o,useEffect:p,useMemo:q,useRef:r,useState:s}=React;function t(){let a=new m;return{observer:a,notify:function(b,c,d){a.emit(b,{storeName:b,hookCall:c,payload:d})}}}let u={},v={},w={},x={},y={},z={},A={},B={},C=b({prefix:"store"}),c=({children:g,atoms:d,filters:e,prefix:f="store"})=>{let h=o(C),a=void 0===f?h.prefix:f;if(d)for(let b in d)void 0===v[`${a}-${b}`]&&(v[`${a}-${b}`]=d[b],w[`${a}-${b}`]=!0);if(e)for(let c in e)void 0===z[`${a}-${c}`]&&(z[`${a}-${c}`]=e[c],x[`${a}-${c}`]=!0);return q(()=>g,[f]),React.createElement(C.Provider,{value:{prefix:a}},g)},D={};function E(a){let{effects:z=[],persist:i,localStoragePersistence:j,sync:E=!0,onSync:F=()=>{}}=a,{prefix:k}=o(C),b=k+"-"+a.name,[G,H]=s(!1),l=j||i,f=q(()=>`${Math.random()}`.split(".")[1],[]);b in A||(A[b]=[]);let I=void 0!==a.default,d=function(){let f=void 0===v[b]&&"function"==typeof a.default,d=f?a.default():a.default instanceof Promise?a.default:void 0,e=d instanceof Promise,c=I&& void 0===v[b]?e?a.default:void 0!==d?d:a.default:v[b];try{return l?"undefined"!=typeof localStorage&&(void 0===v[b]||w[b])&&(w[b]=!1,v[b]=e?void 0:c):void 0===v[b]&&(v[b]=c),l&&"undefined"!=typeof localStorage&& void 0!==localStorage[b]?v[b]:e?void 0:c}catch(g){return c}}(),[m,J]=s(()=>{try{return JSON.parse(localStorage[b])}catch(a){return d}}),[c,K]=s((d instanceof Promise||"function"==typeof d)&& void 0===v[b]?void 0:(v[b]=d,d));B[b]||(B[b]=0),u[b]||(u[b]=t());let{observer:L,notify:x}=u[b],[g,M]=s(!1),h=r(!1),e=n(j=>{let k=!1,i,l;function m(){k=!0}i="function"==typeof j?j(c):j,l=(()=>{try{return JSON.stringify(i)!==JSON.stringify(v[b])}catch(a){return!1}})();let n=(()=>{try{if("function"==typeof v[b])return!0;if(JSON.stringify(i)===JSON.stringify(a.default)&&!D[b])return D[b]=!0,!0}catch(c){return!0}})(),o="function"==typeof v[b]||l||n;try{for(let p of A[b])p()}catch(r){}finally{A[b]=[];try{if(g||h.current)for(let q of z){let d=q({previous:c,state:i,dispatch:e,cancel:m});d instanceof Promise?d.then(a=>{void 0===a||a?"function"==typeof a&&A[b].push(a):k=!0}):void 0===d||d?"function"==typeof d&&A[b].push(d):k=!0}}catch(s){M(!0)}finally{k||(v[b]=i,o&&x(b,f,i),K(i))}}},[f,x,g,h,c,a.name]);p(()=>{async function a(){if("undefined"!=typeof localStorage&& void 0!==localStorage[b])try{if(localStorage[b]!==JSON.stringify(v[b])){let a=JSON.parse(localStorage[b]);e(a),await F(a)}}catch(c){}}if(l&&"undefined"!=typeof window){let c=void 0!==window.addEventListener;if(c&&E)return window.addEventListener("storage",a),()=>{window.removeEventListener("storage",a)}}return()=>{}},[a.name]),p(()=>{if(void 0!==m&&!h.current){let a=setTimeout(()=>{l&&(localStorage[b]===JSON.stringify(v[b])||D[b]||e(m),H(!0))},0),c=setTimeout(()=>{J(void 0),h.current=!0},0);return()=>{clearTimeout(a),clearTimeout(c)}}},[m,e,h]),p(()=>{async function d(){var d;if(void 0===v[b]&&"function"==typeof a.default){if(0===B[b]){B[b]+=1;let g=void 0!==a.default?(async()=>"function"==typeof a.default?a.default():a.default)():void 0;void 0!==g&&g.then(a=>{v[b]=a,x(b,f,v[b]),e(a)})}else B[b]+=1,(c||v[b])&&(null===(d=u[b])|| void 0===d||d.notify(b,f,void 0!==c?c:v[b]))}}d()},[c,a.default,e,a.name,f]),p(()=>()=>{B[b]=0},[a.name]),p(()=>{let a=async a=>{a.hookCall!==f&&K(a.payload)};return L.addListener(b,a),()=>{L.removeListener(b,a)}},[g]),p(()=>{if("undefined"!=typeof localStorage){let a="undefined"!=typeof window,d=a&&"addEventListener"in window;l&&(!d||G)?localStorage[b]!==JSON.stringify(v[b])&&localStorage.setItem(b,JSON.stringify(c)):void 0===localStorage[b]||l||localStorage.removeItem(b)}},[a.name,l,c]);let N=q(()=>a.actions||{},[]),y=q(()=>Object.fromEntries(Object.keys(N).map(a=>[a,b=>N[a]({args:b,state:c,dispatch:e}),])),[c]);return[c,e,y]}let F={};function a(a){a.ignoreKeyWarning&&(F[a.name]=!0),!F[a.name]&&a.name in y&&console.warn(`Duplicate atom name '${a.name}' found. This could lead to bugs in atom state. To remove this warning add 'ignoreKeyWarning: true' to all atom definitions that use the name '${a.name}'.`),y[a.name]=!0;let b=()=>E(a);return b["atom-name"]=a.name,b["init-object"]=a,b}let G=a,H={},I={},J={},K={};function d(b){let{name:c="",get:d}=b,e={},f={},g={},a=()=>{a.deps={};let{prefix:h}=o(C),i=h+"-"+c;J[i]||(J[i]=t());let l=J[i],m=n(function(a,b){l.notify(i,a,b)},[h,i]),r=q(()=>({get:b=>("function"!=typeof b?(e[`${h}-${b.name}`]=!0,f[`${h}-${b.name}`]=v[`${h}-${b.name}`],a.deps=Object.assign(Object.assign({},a.deps),{[`${h}-${b.name}`]:!0})):(e[`${h}-${b["atom-name"]}`]=!0,f[`${h}-${b["atom-name"]}`]=v[`${h}-${b["atom-name"]}`],a.deps=Object.assign(Object.assign({},a.deps),{[`${h}-${b["atom-name"]}`]:!0})),"function"!=typeof b?void 0===v[`${h}-${b.name}`]?b.default:v[`${h}-${b.name}`]:void 0===v[`${h}-${b["atom-name"]}`]?b["init-object"].default:v[`${h}-${b["atom-name"]}`]),read(a){var b;return"function"!=typeof a?g[`${h}-${a.name}`]=!0:g[`${h}-${a["filter-name"]}`]=!0,"function"!=typeof a?void 0===z[`${h}-${a.name}`]?a.default:z[`${h}-${a.name}`]:void 0===z[`${h}-${a["filter-name"]}`]?null===(b=a["init-object"])|| void 0===b?void 0:b.default:z[`${h}-${a["filter-name"]}`]}}),[h]),w=q(()=>Math.random(),[]),j=function(){try{return I[i]?z[i]:(()=>{I[i]=!0,z[i]=b.default;let a;try{if(a=d(r),void 0===a)return b.default;(async()=>{z[i]=await a})()}catch(c){}finally{return a}})()}catch(a){return b.default}}(),[k,y]=s(j instanceof Promise|| void 0===j?b.default:(z[i]=j,j));async function A(a){if("function"==typeof a.payload||JSON.stringify(a.payload)!==JSON.stringify(f[`${a.storeName}`])){`${a.storeName}` in e&&(f[`${a.storeName}`]=a.payload);try{let b=setTimeout(async()=>{let c=a.storeName in e?await d(r):z[i];z[i]=c,y(c),m(w,c),clearTimeout(b)},0)}catch(c){}}}async function B(a){let{storeName:c,payload:b}=a;w!==a.hookCall&&y(b)}return p(()=>{I[i]||m(w,k)},[k]),p(()=>{j instanceof Promise&&j.then(a=>{z[i]=a,y(a)})},[j]),p(()=>{var a,b;if(!K[i]){for(let c in K[i]=!0,x[i]&&d(r),e)null===(a=u[c])|| void 0===a||a.observer.addListener(c,A);for(let f in g)null===(b=J[f])|| void 0===b||b.observer.addListener(f,A);return()=>{var a,b;for(let c in x[i]=!0,e)null===(a=u[c])|| void 0===a||a.observer.removeListener(c,A);for(let d in g)null===(b=J[d])|| void 0===b||b.observer.removeListener(d,A)}}},[b,h]),p(()=>{var a;return null===(a=l.observer)|| void 0===a||a.addListener(i,B),()=>{var a;K[i]=!1,null===(a=null==l?void 0:l.observer)|| void 0===a||a.removeListener(i,B)}},[b,h]),k};return a["filter-name"]=c,a["init-object"]=b,a}function e(a){let{prefix:b}=o(C);return"function"!=typeof a?(void 0===H[`${b}-${a.name}`]?H[`${b}-${a.name}`]=d(a):H[`${b}-${a.name}`]["init-object"]!==a&&(H[`${b}-${a.name}`]=d(a)),H[`${b}-${a.name}`]()):a()}let L={};function f(a){return"function"!=typeof a&&(void 0===L[a.name]?L[a.name]=G(a):L[a.name]["init-object"]!==a&&(L[a.name]=G(a))),"function"!=typeof a?L[a.name]():a()}function g(a){return f(a)[0]}function h(a){return f(a)[1]}function i(a){return f(a)[2]}let M=(()=>{let a=new m;return a})();function j(a){let[b,c]=s(a||{});async function d(){let b={};if("undefined"!=typeof localStorage){for(let a in localStorage)if(!a.match(/clear|getItem|key|length|removeItem|setItem/))try{void 0!==localStorage[a]&&(b[a]=JSON.parse(localStorage[a]))}catch(d){b[a]=localStorage[a]}}c(b)}return p(()=>{d()},[]),p(()=>(M.addListener("store-changed",d),()=>{M.removeListener("store-changed",d)}),[]),b}let k={set(b,a){"undefined"!=typeof localStorage&&"function"==typeof localStorage.setItem&&(localStorage.setItem(b,JSON.stringify(a)),M.emit("store-changed",a))},async remove(a){"undefined"!=typeof localStorage&&"function"==typeof localStorage.removeItem&&(localStorage.removeItem(a),M.emit("store-changed",{}))},get(b,a=null){if("undefined"==typeof localStorage)return a;if("function"==typeof localStorage.getItem)try{return JSON.parse(localStorage.getItem(b))}catch(c){return a}else try{return JSON.parse(localStorage[b])}catch(d){return a}}};function l(c,a=null){let[b,d]=s(a),e=()=>{if("undefined"!=typeof localStorage&&JSON.stringify(localStorage[c])!==JSON.stringify(a))try{d(JSON.parse(localStorage[c]))}catch(b){d(a)}};return p(()=>(e(),M.addListener("store-changed",e),()=>{M.removeListener("store-changed",e)}),[]),b}window.atom=a,window.useAtom=f,window.useValue=g,window.useDispatch=h,window.useActions=i,window.AtomicState=c,window.filter=d,window.useFilter=e,window.storage=k,window.useStorage=j,window.useStorageItem=l})()